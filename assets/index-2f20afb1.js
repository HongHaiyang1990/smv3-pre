import{_ as N,u as R,a as T,b as U,r as m,o as F,c as p,d as f,e,w as t,T as D,f as n,g as i,t as M,i as J,h as g,p as O,j as P,k as j,l as E,M as h,I as L,B as $}from"./index-eb14e6bd.js";import{I as z,F as A,C as G,a as H}from"./index-e40dd58c.js";const k=c=>(O("data-v-ae2cb113"),c=c(),P(),c),K={class:"login"},Q={key:0,class:"login-box"},W={key:1,class:"login-box"},X=k(()=>i("img",{class:"logo",src:j},null,-1)),Y={class:"slogan"},Z={class:"space-between"},ee=k(()=>i("div",{class:"icp"}," Copyright © 2023. 苏州苏明装饰股份有限公司. 苏ICP备07504134号-1 ",-1)),oe={__name:"index",setup(c){const v=R(),b=T(),x=U(),y=m(!1),S="至诚 共享 永续之道",s=m({}),w={username:[{required:!0,message:"账户必填",type:"error"}],password:[{required:!0,message:"密码必填",type:"error"}]},r=m(!1),V=async({validateResult:a,firstError:o,e:u})=>{if(u.preventDefault(),a===!0){const d=await E({...s.value});v.setToken(d.token),h.success("提交成功"),r.value?localStorage.setItem("login",JSON.stringify(s.value)):localStorage.removeItem("login"),v.getInfo(),C()}else h.warning(o)},C=()=>{var a;(a=b.query)!=null&&a.redirect?x.push(decodeURIComponent(b.query.redirect)):x.push("/")};return F(()=>{const a=localStorage.getItem("login");a&&(s.value=JSON.parse(a),r.value=!0)}),(a,o)=>{const u=L,d=z,_=A,q=G,I=$,B=H;return p(),f("div",K,[e(D,{name:"fade"},{default:t(()=>[n(y)?(p(),f("div",Q)):(p(),f("div",W,[X,i("div",Y,M(n(S)),1),e(B,{class:"form",ref:"form",data:n(s),rules:w,"label-width":0,onSubmit:V},{default:t(()=>[e(_,{name:"username"},{default:t(()=>[e(d,{modelValue:n(s).username,"onUpdate:modelValue":o[0]||(o[0]=l=>n(s).username=l),clearable:"",placeholder:"请输入账号"},{"prefix-icon":t(()=>[e(u,{name:"desktop"})]),_:1},8,["modelValue"])]),_:1}),e(_,{name:"password"},{default:t(()=>[e(d,{modelValue:n(s).password,"onUpdate:modelValue":o[1]||(o[1]=l=>n(s).password=l),type:"password",clearable:"",placeholder:"请输入密码"},{"prefix-icon":t(()=>[e(u,{name:"lock-on"})]),_:1},8,["modelValue"])]),_:1}),i("div",Z,[e(q,{modelValue:n(r),"onUpdate:modelValue":o[2]||(o[2]=l=>J(r)?r.value=l:null)},{default:t(()=>[g("记住密码")]),_:1},8,["modelValue"]),e(I,{theme:"default",variant:"text",onClick:o[3]||(o[3]=l=>y.value=!0)},{default:t(()=>[g("忘记密码")]),_:1})]),e(_,null,{default:t(()=>[e(I,{theme:"primary",type:"submit",block:""},{default:t(()=>[g("登录")]),_:1})]),_:1})]),_:1},8,["data"])]))]),_:1}),ee])}}},ae=N(oe,[["__scopeId","data-v-ae2cb113"]]);export{ae as default};
