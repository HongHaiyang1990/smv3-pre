import{r as y,G as m,s as C,A as Q,aA as Y,aB as Z,aC as ee,F as ae,aD as ne,ao as I,z as te,aE as le,o as oe,aF as re,aG as ce,e as s,am as ue,aH as ie,aI as se,J as ve,a4 as de,aJ as fe,L as me,aK as ge,aL as he}from"./index-eb14e6bd.js";/**
 * tdesign v1.7.1
 * (c) 2023 tdesign
 * @license MIT
 */var ye={attach:{type:[String,Function],default:""},body:{type:[String,Function]},cancelBtn:{type:[String,Object,Function],default:""},closeBtn:{type:[String,Boolean,Function]},closeOnEscKeydown:{type:Boolean,default:void 0},closeOnOverlayClick:{type:Boolean,default:void 0},confirmBtn:{type:[String,Object,Function],default:""},default:{type:[String,Function]},destroyOnClose:Boolean,footer:{type:[Boolean,Function],default:!0},header:{type:[String,Boolean,Function],default:!0},mode:{type:String,default:"overlay",validator:function(e){return e?["overlay","push"].includes(e):!0}},placement:{type:String,default:"right",validator:function(e){return e?["left","right","top","bottom"].includes(e):!0}},preventScrollThrough:{type:Boolean,default:!0},showInAttachedElement:Boolean,showOverlay:{type:Boolean,default:!0},size:{type:String,default:void 0},sizeDraggable:Boolean,visible:Boolean,zIndex:{type:Number},onCancel:Function,onClose:Function,onCloseBtnClick:Function,onConfirm:Function,onEscKeydown:Function,onOverlayClick:Function};/**
 * tdesign v1.7.1
 * (c) 2023 tdesign
 * @license MIT
 */var Ce=function(e){var r=y(!1),o=y(null),v=function(){document.addEventListener("mouseup",d,!0),document.addEventListener("mousemove",_,!0),r.value=!0},d=function c(){document.removeEventListener("mouseup",c,!0),document.removeEventListener("mousemove",_,!0),r.value=!1},_=function(b){var O=b.x,w=b.y,E=document.documentElement.clientHeight,l=document.documentElement.clientWidth,f=8,g=8;if(r.value&&e.sizeDraggable){if(e.placement==="right"){var M=Math.min(Math.max(l-O+g,g),l);o.value="".concat(M,"px")}if(e.placement==="left"){var k=Math.min(Math.max(O+g,g),l);o.value="".concat(k,"px")}if(e.placement==="top"){var z=Math.min(Math.max(w+f,f),E);o.value="".concat(z,"px")}if(e.placement==="bottom"){var T=Math.min(Math.max(E-w+f,f),E);o.value="".concat(T,"px")}}},D=m(function(){var c=["right","left"].includes(e.placement),b={left:"right",right:"left",top:"bottom",bottom:"top"};return C(C(C(C({zIndex:1,position:"absolute",background:"transparent"},b[e.placement],0),"width",c?"16px":"100%"),"height",c?"100%":"16px"),"cursor",c?"col-resize":"row-resize")});return{draggedSizeValue:o,enableDrag:v,draggableLineStyles:D}};/**
 * tdesign v1.7.1
 * (c) 2023 tdesign
 * @license MIT
 */var be=1,we=Q({name:"TDrawer",inheritAttrs:!1,props:ye,emits:["update:visible"],setup:function(e,r){var o=y(!1),v=y(!1),d=y(),_=y(),D=Y("drawer"),c=D.globalConfig,b=Z({CloseIcon:se}),O=b.CloseIcon,w=ve(),E=ee(),l=ae("drawer"),f=Ce(e),g=f.draggedSizeValue,M=f.enableDrag,k=f.draggableLineStyles,z=ne(function(){return e.attach}),T=function(a){var n;(n=e.onConfirm)===null||n===void 0||n.call(e,{e:a})},$=function(a){var n;(n=e.onCancel)===null||n===void 0||n.call(e,{e:a}),S({trigger:"cancel",e:a})},N=fe({confirmBtnAction:T,cancelBtnAction:$}),K=N.getConfirmBtn,L=N.getCancelBtn,F=y(null),P=m(function(){return[l.value,"".concat(l.value,"--").concat(e.placement),C(C(C({},"".concat(l.value,"--open"),v.value),"".concat(l.value,"--attach"),e.showInAttachedElement),"".concat(l.value,"--without-mask"),!e.showOverlay)]}),B=m(function(){var t;if(g.value)return g.value;var a=(t=e.size)!==null&&t!==void 0?t:c.value.size,n=isNaN(Number(a))?a:"".concat(a,"px");return{small:"300px",medium:"500px",large:"760px"}[a]||n}),H=m(function(){return{transform:v.value?"translateX(0)":void 0,width:["left","right"].includes(e.placement)?B.value:"",height:["top","bottom"].includes(e.placement)?B.value:""}}),V=m(function(){return["".concat(l.value,"__content-wrapper"),"".concat(l.value,"__content-wrapper--").concat(e.placement)]}),h=m(function(){return F.value&&F.value.parentNode}),W=m(function(){return[e.mode,e.placement].join()}),j=m(function(){return{display:"flex",justifyContent:e.placement==="right"?"flex-start":"flex-end"}}),p=function(a){var n;if((n=e.closeOnEscKeydown)!==null&&n!==void 0?n:c.value.closeOnEscKeydown&&a.key==="Escape"){var i;(i=e.onEscKeydown)===null||i===void 0||i.call(e,{e:a}),S({trigger:"esc",e:a})}},A=function(){clearTimeout(_.value),_.value=setTimeout(function(){var a,n;(a=d.value)===null||a===void 0||(a=a.parentNode)===null||a===void 0||(n=a.removeChild)===null||n===void 0||n.call(a,d.value)},150)},G=function(){e.mode==="push"&&de(function(){h.value&&(h.value.style.cssText="transition: margin 300ms cubic-bezier(0.7, 0.3, 0.1, 1) 0s;")})},J=function(){if(h.value&&!(e.mode!=="push"||!h.value)){var a={left:"margin: 0 0 0 ".concat(B.value),right:"margin: 0 0 0 -".concat(B.value),top:"margin: ".concat(B.value," 0 0 0"),bottom:"margin: -".concat(B.value," 0 0 0")}[e.placement];v.value?h.value.style.cssText+=a:h.value.style.cssText=h.value.style.cssText.replace(/margin:.+;/,"")}},X=function(){var a=K({confirmBtn:e.confirmBtn,globalConfirm:c.value.confirm,className:"".concat(l.value,"__confirm")}),n=L({cancelBtn:e.cancelBtn,globalCancel:c.value.cancel,className:"".concat(l.value,"__cancel")});return s("div",{style:j.value},[e.placement==="right"?a:null,n,e.placement!=="right"?a:null])};I(W,function(){G()},{immediate:!0}),I(function(){return e.visible},function(t){te||(t?!e.showInAttachedElement&&e.preventScrollThrough&&d.value&&document.head.appendChild(d.value):A(),e.destroyOnClose?t?(o.value=!1,setTimeout(function(){v.value=!0})):(v.value=!1,setTimeout(function(){o.value=!0},200)):o.value===!0&&t?(o.value=!1,setTimeout(function(){v.value=!0})):v.value=t)},{immediate:!0});var R=function(a){var n;(n=e.onCloseBtnClick)===null||n===void 0||n.call(e,{e:a}),S({trigger:"close-btn",e:a})},U=function(a){var n,i;(n=e.onOverlayClick)===null||n===void 0||n.call(e,{e:a}),((i=e.closeOnOverlayClick)!==null&&i!==void 0?i:c.value.closeOnOverlayClick)&&S({trigger:"overlay",e:a})},q=function(a){var n;if(((n=e.closeOnEscKeydown)!==null&&n!==void 0?n:c.value.closeOnEscKeydown)&&a.key==="Escape"){var i;(i=e.onEscKeydown)===null||i===void 0||i.call(e,{e:a}),S({trigger:"esc",e:a})}},S=function(a){var n;(n=e.onClose)===null||n===void 0||n.call(e,a),r.emit("update:visible",!1)};return le(function(){J()}),oe(function(){var t=document.documentElement.scrollHeight>document.documentElement.clientHeight,a=t?re():0;d.value=document.createElement("style"),d.value.dataset.id="td_drawer_".concat(+new Date,"_").concat(be+=1),d.value.innerHTML=`
        html body {
          overflow-y: hidden;
          transition: margin 300ms cubic-bezier(0.7, 0.3, 0.1, 1) 0s;
          `.concat(e.mode==="push"?"":"width: calc(100% - ".concat(a,"px);"),`
        }
      `),v.value&&!e.showInAttachedElement&&e.preventScrollThrough&&document.head.appendChild(d.value),window.addEventListener("keydown",p)}),ce(function(){A(),window.removeEventListener("keydown",p)}),function(){if(!o.value){var t=E("body","default"),a=w("header"),n=X();return s(ie,{disabled:!e.attach||!z.value,to:z.value},{default:function(){return[s("div",ue({ref:F,class:P.value,style:{zIndex:e.zIndex},onKeydown:q,tabindex:0},r.attrs),[e.showOverlay&&s("div",{class:"".concat(l.value,"__mask"),onClick:U},null),s("div",{class:V.value,style:H.value},[a&&s("div",{class:"".concat(l.value,"__header")},[a]),e.closeBtn&&s("div",{class:"".concat(l.value,"__close-btn"),onClick:R},[w("closeBtn",s(O,null,null))]),s("div",{class:["".concat(l.value,"__body"),"narrow-scrollbar"]},[t]),e.footer&&s("div",{class:"".concat(l.value,"__footer")},[w("footer",n)]),e.sizeDraggable&&s("div",{style:k.value,onMousedown:M},null)])])]}})}}}});/**
 * tdesign v1.7.1
 * (c) 2023 tdesign
 * @license MIT
 */var xe=me(we);const _e={rowKey:"index",cellEmptyContent:"-",hover:!0,bordered:!0},x=ge(he,{number:"BigNumber"}),Ee=(u,e)=>{let r="";if(u)try{const o=x.format(x.evaluate(u,e),{notation:"fixed",precision:1}).replace(/\.[56789]$/,".5").replace(/\.[01234]$/,"");r=x.numeric(o,"number")}catch{r=NaN}return r},Se=(u,e)=>{let r="";if((u||u==="0")&&(u||u==="0"))try{const o=x.format(x.evaluate(`${u} * ${u}`),{notation:"fixed",precision:1}).replace(/\.[56789]$/,".5").replace(/\.[01234]$/,"");r=x.numeric(o,"number")}catch{r=NaN}return r};export{xe as D,Se as a,_e as d,Ee as f};
