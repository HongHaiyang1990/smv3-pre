import{_ as g}from"./index-b6e47c4f.js";import{r as t,G as h,c as C,m as k,w as c,e as a,h as _,f as s,i as B,a3 as D,a4 as w,Z as x}from"./index-eb14e6bd.js";import{C as N,_ as $}from"./bom.vue_vue_type_script_setup_true_lang-60bee7e2.js";import{D as T}from"./formula-ff90f8d8.js";const I={__name:"detail",setup(P,{expose:p}){const r=t(null),i=t(null),n=t(!1),y=t(null),b=h(()=>`产品工艺-${m.value.craftName}`),m=t({}),v=[{colKey:"id",label:"工艺编号"},{colKey:"craftName",label:"工艺名称"},{colKey:"createTime",label:"创建日期"},{colKey:"projectName",label:"归属项目"},{colKey:"designerName",label:"项目经理"},{colKey:"designer",label:"设计师"},{colKey:"primaryComment",label:"一级注释"},{colKey:"secondaryComment",label:"二级注释"},{colKey:"remark",label:"备注"},{colKey:"updateTime",label:"更新日期"}],K=e=>{i.value.changeKeyData(e)};return p({open:async(e=null)=>{if(y.value=e,n.value=!0,e){const l=await D({id:e}),{photos:o,gyParams:u,boms:d,...f}=l.data;m.value=l.data,w(()=>{r.value.setPhotos(o),r.value.setKeys(u),i.value.setBomData(d)})}}}),(e,l)=>{const o=x,u=g,d=T;return C(),k(d,{visible:s(n),"onUpdate:visible":l[0]||(l[0]=f=>B(n)?n.value=f:null),attach:"body",header:s(b),"destroy-on-close":"",placement:"bottom",size:"100%",footer:!1,closeBtn:!0},{body:c(()=>[a(o,{class:"divider",align:"left"},{default:c(()=>[_("基本信息")]),_:1}),a(u,{columnCount:2,columns:v,data:s(m)},null,8,["data"]),a(o,{class:"divider",align:"left"},{default:c(()=>[_("示意图及参数")]),_:1}),a(s(N),{ref_key:"$comKey",ref:r,isDetail:!0,onChange:K},null,512),a(o,{class:"divider",align:"left"},{default:c(()=>[_("BOM组成")]),_:1}),a(s($),{ref_key:"$comBom",ref:i,isDetail:!0},null,512)]),_:1},8,["visible","header"])}}};export{I as _};
