import{_ as b}from"./index-f858892f.js";import{r as p,c as u,d as K,e as a,w as n,f as _,R as $,h as s,m as g,Q as x,af as P,ag as v,M as N,a8 as T,W as D}from"./index-18b660c1.js";import{b as E}from"./index-a6ad3bbb.js";import{_ as q}from"./detail.vue_vue_type_script_setup_true_lang-97ae38af.js";import{L as w}from"./index-d761e5bd.js";import{P as B}from"./index-bae3b8b9.js";import"./index-c23684c8.js";import"./computedMaterial.vue_vue_type_script_setup_true_lang-7a0f04f7.js";import"./formula-4ae4e899.js";import"./index-0cd7f2c9.js";import"./slotCell.vue_vue_type_script_lang-b6931333.js";import"./selectProduct.vue_vue_type_script_setup_true_lang-5d10fcb1.js";import"./bom.vue_vue_type_script_setup_true_lang-95283b00.js";const J={__name:"index",setup(L){const l=p(null),i=p(null),d=[{cmp:"input",name:"productorderName",label:"生产任务名称"}],f=[{colKey:"serial-number",title:"#",width:60},{colKey:"id",title:"生产任务编号"},{colKey:"createTime",title:"申请时间"},{colKey:"designer",title:"设计师"},{colKey:"wishDate",title:"期望完成时间"},{colKey:"status",title:"状态",cell:(c,{row:e})=>{var t;return(t=E[e.status])==null?void 0:t.label}},{colKey:"remark",title:"备注"},{colKey:"processName",title:"审核人"},{colKey:"processTime",title:"通过时间"},{colKey:"operation",title:"操作",width:290}],m=(c,e)=>{v({id:c,status:e}).then(()=>{N.success(`生产任务已审核，状态：${e==5?"通过":e==9?"不通过":"未知"}`),i.value.refresh()})},h=async(c,e)=>{const t=await requestProductTaskExport({id:c});T(t,e)};return(c,e)=>{const t=w,k=B,y=D,C=b;return u(),K($,null,[a(C,{ref_key:"$table",ref:i,searchItems:d,columns:f,api:_(P),searchExtras:{status:1}},{operation:n(({row:o})=>[a(y,null,{default:n(()=>[a(t,{theme:"primary",onClick:r=>_(l).open(o.id)},{default:n(()=>[s(" 查看 ")]),_:2},1032,["onClick"]),a(t,{theme:"primary",onClick:r=>h(o.id,o.productorderName)},{default:n(()=>[s(" 导出 ")]),_:2},1032,["onClick"]),o.status==1?(u(),g(k,{key:0,content:"请选择此生产任务的审核结果","confirm-btn":{content:"通过",theme:"success"},onConfirm:r=>m(o.id,5),"cancel-btn":{content:"不通过",theme:"danger"},onCancel:r=>m(o.id,9)},{default:n(()=>[a(t,{theme:"primary"},{default:n(()=>[s(" 审核 ")]),_:1})]),_:2},1032,["onConfirm","onCancel"])):x("",!0)]),_:2},1024)]),_:1},8,["api"]),a(q,{ref_key:"$DialogDetail",ref:l},null,512)],64)}}};export{J as default};
