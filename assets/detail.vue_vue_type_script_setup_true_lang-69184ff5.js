import{a as h,_ as k}from"./computedMaterial.vue_vue_type_script_setup_true_lang-ba0e96af.js";import{_ as D}from"./index-b6e47c4f.js";import{r as a,G as N,c as x,d as K,e as t,w as m,f as o,h as v,i as g,R as C,ab as P,Z as B}from"./index-eb14e6bd.js";import{_ as I}from"./selectProduct.vue_vue_type_script_setup_true_lang-dbb43b6c.js";import{L as U}from"./index-158b6f05.js";import{D as L}from"./formula-ff90f8d8.js";const G={__name:"detail",emits:["submit"],setup(M,{expose:y,emit:R}){const d=a(null),_=a(null),p=a(null),r=a(!1),b=a(null),w=N(()=>`生产任务-${n.value.productorderName}`),n=a({}),$=[{colKey:"projectId",label:"所属项目"},{colKey:"productorderName",label:"生产任务名称"},{colKey:"wishDate",label:"期望完成时间"},{colKey:"applyName",label:"申请人"},{colKey:"remark",label:"备注"},{colKey:"fileName",label:"附件",cell:e=>e.fileUrl?t(U,{theme:"primary",onClick:()=>p.value.open(e.fileUrl,e.fileName)},{default:()=>[e.fileName]}):"-"}];return y({open:async(e=null)=>{b.value=e,r.value=!0,e&&P({id:e}).then(l=>{const{materials:c,panel:s,accessory:i,listItem:u,...f}=l.data;d.value.setProductData(u),_.value.setComputedData({materials:c,panel:s,accessory:i}),n.value=l.data})}}),(e,l)=>{const c=D,s=B,i=L,u=k;return x(),K(C,null,[t(i,{visible:o(r),"onUpdate:visible":l[0]||(l[0]=f=>g(r)?r.value=f:null),attach:"body",header:o(w),"destroy-on-close":"",placement:"bottom",size:"100%",footer:!1,closeBtn:!0},{body:m(()=>[t(c,{columnCount:2,"label-width":"150px",columns:$,data:o(n)},null,8,["data"]),t(s,{class:"divider",align:"left"},{default:m(()=>[v("生产产品")]),_:1}),t(o(I),{ref_key:"$selectProduct",ref:d,isDetail:!0},null,512),t(s,{class:"divider",align:"left"},{default:m(()=>[v("物料用量")]),_:1}),t(o(h),{ref_key:"$computedMaterial",ref:_,isDetail:!0},null,512)]),_:1},8,["visible","header"]),t(u,{ref_key:"$preview",ref:p,canDown:!0},null,512)],64)}}};export{G as _};
