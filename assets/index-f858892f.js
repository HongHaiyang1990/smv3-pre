import{D as W,T as A,S as Q,b as G}from"./index-d761e5bd.js";import{G as F,c,m as p,am as h,f as a,i as K,_ as L,r as V,o as M,aQ as q,ac as R,w as o,g as H,e as s,d as J,R as X,h as P,Q as f,b3 as w,I as Y,B as Z,W as ee,bb as ae,bc as te}from"./index-18b660c1.js";import{F as ne,a as oe,I as le}from"./index-c23684c8.js";const re={__name:"dateRangePicker",props:{options:{type:Object,default:()=>({})},range0:{type:String,default:""},range1:{type:String,default:""}},emits:["update:range0","update:range1"],setup(u,{emit:S}){const d=u,b=S,m=F({get(){return[d.range0,d.range1]},set(i){b("update:range0",i[0]),b("update:range1",i[1])}});return(i,_)=>{const t=W;return c(),p(t,h(u.options,{modelValue:a(m),"onUpdate:modelValue":_[0]||(_[0]=g=>K(m)?m.value=g:null)}),null,16,["modelValue"])}}};const se={class:"search-container"},ce={__name:"index",props:{api:{type:Function,default:()=>({})},columns:{type:Array,default:()=>[]},tableOptions:{type:Object,default:()=>({})},searchItems:{type:Array,default:()=>[]},searchInites:{type:Object,default:()=>({})},searchExtras:{type:Object,default:()=>({})}},setup(u,{expose:S}){const d=u,b={rowKey:"index",cellEmptyContent:"-",hover:!0,stripe:!0,bordered:!0},m=F(()=>({...b,...d.tableOptions})),i=V([]),_=V(!1),t=V({}),g=(n={})=>{let v=`请输入${n.label}`;return n.cmp=="select"&&(v="全部"),n.cmp=="dateRangePicker"&&(v=["开始","结束"]),{...{clearable:!0,placeholder:v,size:m.value.size,style:{width:"150px"}},...n.itemOptions||{}}},r=V({current:1,pageSize:10,total:0}),T=n=>{r.value.current=n.current,r.value.pageSize=n.pageSize,y()},y=async()=>{if(!d.api)return!1;_.value=!0;const n=await d.api({...t.value,pageNum:r.value.current,pageSize:r.value.pageSize,...d.searchExtras});i.value=n.rows,r.value.total=n.total,_.value=!1};M(()=>{x()});const U=()=>{r.value.current=1,r.value.total=0,y()},z=()=>{y()},x=()=>{r.value={current:1,pageSize:10,total:0},t.value={...d.searchInites},y()};return S({search:U,refresh:z,reset:x}),(n,v)=>{const C=le,$=Q,j=G,N=ne,I=Y,O=Z,B=ee,D=oe,E=A;return c(),p(E,h({columns:u.columns,data:a(i),pagination:a(r),loading:a(_)},a(m),{onPageChange:T}),q({topContent:o(()=>[H("div",se,[s(D,{model:a(t),layout:"inline",colon:""},{default:o(()=>[(c(!0),J(X,null,R(u.searchItems,(e,k)=>(c(),p(N,{labelWidth:"auto",label:e.label,key:k},{default:o(()=>[e.cmp=="input"?(c(),p(C,h({key:0},g(e),{modelValue:a(t)[e.name],"onUpdate:modelValue":l=>a(t)[e.name]=l}),null,16,["modelValue","onUpdate:modelValue"])):f("",!0),e.cmp=="select"?(c(),p($,h({key:1},g(e),{modelValue:a(t)[e.name],"onUpdate:modelValue":l=>a(t)[e.name]=l}),null,16,["modelValue","onUpdate:modelValue"])):f("",!0),e.cmp=="datePicker"?(c(),p(j,h({key:2},g(e),{modelValue:a(t)[e.name],"onUpdate:modelValue":l=>a(t)[e.name]=l}),null,16,["modelValue","onUpdate:modelValue"])):f("",!0),e.cmp=="dateRangePicker"?(c(),p(re,{key:3,options:g(e),range0:a(t)[e.rangeName[0]],"onUpdate:range0":l=>a(t)[e.rangeName[0]]=l,range1:a(t)[e.rangeName[1]],"onUpdate:range1":l=>a(t)[e.rangeName[1]]=l},null,8,["options","range0","onUpdate:range0","range1","onUpdate:range1"])):f("",!0)]),_:2},1032,["label"]))),128)),s(N,{labelWidth:"0px"},{default:o(()=>[s(B,null,{default:o(()=>[u.searchItems&&u.searchItems.length?(c(),p(O,{key:0,theme:"primary",onClick:U},{icon:o(()=>[s(I,{name:"search"})]),default:o(()=>[P(" 搜索 ")]),_:1})):f("",!0),s(O,{variant:"outline",theme:"primary",onClick:z},{icon:o(()=>[s(I,{name:"refresh"})]),default:o(()=>[P(" 刷新 ")]),_:1}),s(O,{variant:"outline",theme:"default",onClick:x},{icon:o(()=>[s(I,{name:"rollback"})]),default:o(()=>[P(" 重置 ")]),_:1})]),_:1})]),_:1})]),_:1},8,["model"]),s(B,null,{default:o(()=>[w(n.$slots,"topBtns",{},void 0,!0)]),_:3})])]),_:2},[R(n.$slots,(e,k)=>({name:k,fn:o(l=>[w(n.$slots,k,ae(te(l)),void 0,!0)])}))]),1040,["columns","data","pagination","loading"])}}},me=L(ce,[["__scopeId","data-v-8e9dae00"]]);export{me as _};
